{"version":3,"sources":["panels/Home.js","panels/Favorites.js","panels/Main.js","App.js","index.js"],"names":["Home","name","photo","year","idItem","top","className","id","description","before","type","src","size","Favorites","Main","dataStorage","activeTab","go","tabHome","tabFavorites","count","maxDataLength","lastItem","pay","getPlatform","useNavigatorOnline","isOffline","isOnline","renderFavorites","map","item","key","console","log","vertical","theme","onClick","selected","length","level","stretched","style","margin","App","useState","activePanel","setActivePanel","fetchedUser","setActiveTab","setCount","setDataStorage","setMaxDataLength","dataFirst","setGetPlatform","popout","setPaymentStatus","setLastItem","data","min","arrLength","differenceData","getRandomInt","max","Math","ceil","floor","random","targetList1","randomFirst","randomFirstId","undefined","find","setId","targetList2","findRandomFirst3","push","a","stringId","JSON","stringify","connect","sendPromise","then","res","catch","error","useEffect","subscribe","detail","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","platform","newStr","keys","replace","psj","parse","e","currentTarget","dataset","to","status","result","send","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9343d396.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\n// import styles from \"./App.module.sass\";\nimport styles from \"../styles/custom-styles.sass\";\nimport Fake from 'react-reveal';\n\nconst Home = ({name, photo, year, idItem}) => {\n\n\n    return (\n        <Fake top>\n            <Div className='card bg-color'>\n                    <Cell\n                        className='myItem'\n                        id={idItem}\n                        description={year}\n                        before={<Avatar\n                            type=\"image\"\n                            src={photo}\n                            size={140}\n                        />}\n                    >\n                        {name}\n                    </Cell>\n            </Div>\n        </Fake>\n    )\n};\n\n\nexport default Home;\n\n\n\n\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\r\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\r\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\r\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell';\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\r\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\r\n// import styles from \"./App.module.sass\";\r\nimport styles from \"../styles/custom-styles.sass\";\r\nimport Fake from 'react-reveal';\r\n\r\nconst Favorites = ({name, photo, year, idItem}) => {\r\n\r\n\r\n    return (\r\n        <Fake top>\r\n            <Div className='card bg-color'>\r\n                <Cell\r\n                    className='myItem'\r\n                    id={idItem}\r\n                    description={year}\r\n                    before={<Avatar\r\n                        type=\"image\"\r\n                        src={photo}\r\n                        size={140}\r\n                    />}\r\n                >\r\n                    {name}\r\n                </Cell>\r\n            </Div>\r\n        </Fake>\r\n    )\r\n};\r\n\r\n\r\nexport default Favorites;\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport List from '@vkontakte/vkui/dist/components/List/List';\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout';\nimport Tabs from '@vkontakte/vkui/dist/components/Tabs/Tabs';\nimport TabsItem from '@vkontakte/vkui/dist/components/TabsItem/TabsItem';\nimport HorizontalScroll from '@vkontakte/vkui/dist/components/HorizontalScroll/HorizontalScroll';\nimport PanelHeaderBack from \"@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack\";\nimport Home from './Home';\nimport Favorites from './Favorites';\nimport {useNavigatorOnline} from '@oieduardorabelo/use-navigator-online';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\n\n// import styles from \"../styles/App.module.sass\";\nimport styles from \"../styles/custom-styles.sass\";\n\nconst Main = ({id, dataStorage, go, activeTab, tabHome, tabFavorites, count, maxDataLength, lastItem, pay, getPlatform}) => {\n    let {isOnline, isOffline} = useNavigatorOnline();\n\n    const renderFavorites = dataStorage.map(item => {\n        return (\n            <Favorites\n                key={'itemFavorites' + item.id}\n                idItem={item.id}\n                photo={item.photo}\n                name={item.name}\n                year={item.year}\n            />\n        );\n    });\n\n    console.log(\"lastItem\", lastItem);\n    return (\n\n        <Panel id={id}>\n            <PanelHeader>Случайное кино</PanelHeader>\n            <FixedLayout vertical=\"top\">\n                <Tabs theme=\"header\" type=\"buttons\">\n                    <HorizontalScroll>\n                        <TabsItem\n                            onClick={tabHome}\n                            selected={activeTab === 'home'}\n                        >\n                            Главная\n                        </TabsItem>\n                        <TabsItem\n                            onClick={tabFavorites}\n                            selected={activeTab === 'favorites'}\n                        >\n                            Мои фильмы\n                        </TabsItem>\n                    </HorizontalScroll>\n                </Tabs>\n            </FixedLayout>\n\n\n            {isOffline\n                ?\n                <Div className=\"divSpinner\">\n                    <Div>\n                        Отсутствует интернет - соединение!\n                    </Div>\n                    <ScreenSpinner size='large'/>\n                </Div>\n                :\n                <Div>\n                    {activeTab === 'home' && maxDataLength === false\n                        ?\n                        <Div>\n                            <Div>\n                                Нажатий: {count}\n                            </Div>\n\n                            {lastItem.length !== ''\n                                ?\n                                <Home\n                                    key={'itemHome' + lastItem.id}\n                                    idItem={lastItem.id}\n                                    photo={lastItem.photo}\n                                    name={lastItem.name}\n                                    year={lastItem.year}\n                                />\n                                :\n                                ''\n                            }\n\n                            {getPlatform === \"iOS\"\n                                ?\n                                <Div className=\"button\">\n\n                                    <Button level=\"commerce\"\n                                            onClick={pay}\n                                            size=\"xl\"\n                                            stretched\n                                            style={{margin: 40}}>Найти за 1 руб</Button>\n                                </Div>\n                                :\n                                <Div className=\"button\">\n                                    <Div className=\"divButton\">\n                                        К сожалению, платежи в данном сервисе не работают на устройствах с системой\n                                        iOS\n                                    </Div>\n                                    <Button level=\"disabled\"\n                                            size=\"xl\"\n                                            stretched\n                                            style={{margin: 40}}>Найти за 1 руб</Button>\n                                </Div>\n                            }\n                        </Div>\n                        :\n                        <Div>\n                            Вы получили все фильмы !\n                        </Div>\n\n                    }\n\n                    {activeTab === 'home' && maxDataLength === true\n                        ?\n                        <Div>\n                            <Div>\n                                Вы получили все фильмы !\n                            </Div>\n                        </Div>\n                        :\n                        ''\n\n                    }\n\n\n                    {activeTab === 'favorites'\n                        ?\n                        <Div>\n                            {renderFavorites}\n                        </Div>\n                        :\n                        ''\n                    }\n                </Div>\n\n            }\n\n        </Panel>\n\n\n    );\n};\n\n\nexport default Main;\n\n\n","import React, {useState, useEffect} from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Main from './panels/Main';\nimport Home from './panels/Home';\nimport Favorites from './panels/Favorites';\n\nconst App = () => {\n        const [activePanel, setActivePanel] = useState('main');\n        const [fetchedUser, setUser] = useState(null);\n        const [activeTab, setActiveTab] = useState('home');\n        const [count, setCount] = useState(0);\n        const [dataStorage, setDataStorage] = useState([]);\n        const [maxDataLength, setMaxDataLength] = useState(false);\n        const [dataFirst, setDataFirst] = useState([]);\n        const [getPlatform, setGetPlatform] = useState(\"\");\n        const [popout, setPopout] = useState();\n        const [statusConnections, setStatusConnections] = useState('online');\n        const [paymentStatus, setPaymentStatus] = useState(false);\n        const [lastItem, setLastItem] = useState(\n            {\n                id: 0,\n                photo: \"https://sun9-17.userapi.com/c854524/v854524232/1ab0cc/YP4_Xic08oY.jpg\",\n                name: \"Чтобы получить случайный фильм, нажмите кнопку ниже\"\n            });\n\n\n        const data = [\n            {\n                id: 1,\n                photo: \"https://st.kp.yandex.net/images/film_big/1188529.jpg\",\n                name: \"Достать ножи Достать ножи Достать ножи Достать ножи\",\n                year: 2019\n            },\n            {\n                id: 2,\n                photo: \"https://st.kp.yandex.net/images/film_big/1207545.jpg\",\n                name: \"Курьер\",\n                year: 2019\n            },\n            {\n                id: 3,\n                photo: \"https://st.kp.yandex.net/images/film_big/835086.jpg\",\n                name: \"Ford против Ferrari\",\n                year: 2019\n            },\n            {\n                id: 4,\n                photo: \"https://st.kp.yandex.net/images/film_big/837737.jpg\",\n                name: \"Сиротский Бруклин\",\n                year: 2019\n            },\n            {\n                id: 5,\n                photo: \"https://sun9-64.userapi.com/c204716/v204716471/1c563/J4xlZLC9Yeg.jpg\",\n                name: \"Ванильное небо\",\n                year: 2001\n            },\n            {\n                id: 6,\n                photo: \"https://sun9-20.userapi.com/c204724/v204724471/1cf8a/-ubqon4oJF0.jpg\",\n                name: \"Искусственный разум\",\n                year: 2001\n            }\n        ];\n        const min = 1;\n        const arrLength = data.length + 1;\n        const differenceData = data.length;\n\n\n        //const [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n        // useEffect(() => {\n        //     if (navigator.onLine) {\n        //         // Устройство в интернете\n        //         setPopout(null);\n        //         setStatusConnections('online');\n        //         alert('online');\n        //     } else {\n        //         // Устройство не подключено к интернету\n        //         setPopout(<ScreenSpinner size='large'/>);\n        //         setStatusConnections('offline');\n        //         alert('offline');\n        //     }\n        // }, [statusConnections]);\n\n\n        useEffect(() => {\n\n\n            connect.subscribe(({detail: {type, data}}) => {\n                if (type === 'VKWebAppUpdateConfig') {\n                    const schemeAttribute = document.createAttribute('scheme');\n                    schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n                    document.body.attributes.setNamedItem(schemeAttribute);\n                }\n            });\n\n            connect.sendPromise('VKWebAppGetClientVersion',\n            ).then(res => {\n                console.log(\"ВЕРСИЯ ПРИЛОЖЕНИЯ:\", res);\n                if (res.platform === \"iOS\") {\n                    setGetPlatform(\"iOS\");\n                }\n            }).catch(error => {\n                console.log(error);\n            });\n\n\n            connect.sendPromise('VKWebAppStorageGet',\n                {\n                    'keys': ['dataStorage']\n                })\n                .then((res) => {\n                    const re = /&quot;/gi;\n                    let str = res.keys[0].value;\n                    const newStr = str.replace(re, '\"');\n                    const psj = JSON.parse(newStr);\n                    setDataStorage(psj);\n\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n\n            // fetchData();\n        }, []);\n\n\n        function getRandomInt(min, max) {\n            min = Math.ceil(min);\n            max = Math.floor(max);\n            return Math.floor(Math.random() * (max - min)) + min; //Максимум не включается, минимум включается\n        }\n\n        function targetList1() {\n            console.log(' targetList1 lastItem:', lastItem);\n            const randomFirst = getRandomInt(min, arrLength);\n            const randomFirstId = data[randomFirst - 1];\n            setCount(count + 1);\n\n\n            if (dataStorage.length <= 0) {\n                const findRandomFirst2 = dataStorage.find(\n                    item => item.id === randomFirstId.id\n                );\n\n                if (findRandomFirst2 === undefined && dataStorage.length !== differenceData) {\n                    setId(randomFirstId);\n                } else {\n                    targetList2();\n                    setMaxDataLength(true);\n                }\n            } else {\n                const findRandomFirst3 = dataStorage.find(\n                    item => item.id === randomFirstId.id\n                );\n                if (dataStorage.length !== differenceData) {\n                    if (findRandomFirst3 === undefined) {\n                        setId(randomFirstId);\n                    } else {\n                        targetList2();\n                    }\n                } else {\n                    // refreshStorage();\n                    setMaxDataLength(true);\n                }\n            }\n        }\n\n\n        function pay() {\n            connect.sendPromise('VKWebAppOpenPayForm', {\n                \"app_id\": 7254171,\n                \"action\": \"pay-to-group\",\n                \"params\": {\n                    \"amount\": 1,\n                    \"group_id\": 189804850   // 189974647\n                }\n            }).then(res => {\n                if (res.status || res.result.status) {\n                    setPaymentStatus(true);\n                    console.log('ОПЛАТА ПРОШЛА 1');\n                    targetList1();\n\n                    console.log(res.status); // работает\n                }\n            }).catch(error => {\n                console.log(error);\n            });\n        }\n\n\n        function targetList2() {\n            console.log(' targetList1 lastItem:', lastItem);\n            const randomFirst = getRandomInt(min, arrLength);\n            const randomFirstId = data[randomFirst - 1];\n\n            const findRandomFirst3 = dataStorage.find(\n                item => item.id === randomFirstId.id\n            );\n\n            if (dataStorage.length !== differenceData) {\n                if (findRandomFirst3 === undefined) {\n                    setId(randomFirstId);\n                } else {\n                    targetList1();\n                }\n            } else {\n                // refreshStorage();\n                setMaxDataLength(true);\n                console.log(\" 0000 maxDataLength:\", maxDataLength);\n            }\n        }\n\n\n        function setId(randomFirstId) {\n            dataStorage.push(randomFirstId);\n            setDataStorage(dataStorage);\n            const a = dataStorage[dataStorage.length - 1];\n            setLastItem(a);\n\n            const stringId = JSON.stringify(dataStorage);\n            console.log(' setId dataFirst:', dataFirst);\n\n            connect.sendPromise(\"VKWebAppStorageSet\",\n                {\n                    \"key\": \"dataStorage\",\n                    \"value\": stringId\n                })\n                .then((res) => {\n                    console.log(res);\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n        }\n\n\n        function refreshStorage() {\n            connect.sendPromise(\"VKWebAppStorageSet\",\n                {\n                    \"key\": \"dataStorage\",\n                    \"value\": \"\"\n                })\n                .then((res) => {\n                    console.log(res);\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n        }\n\n\n        function returnLastItem(arr) {\n            return arr[arr.length - 1];\n        }\n\n        function tabHome() {\n            setActiveTab('home');\n        }\n\n        function tabFavorites() {\n            setActiveTab('favorites');\n        }\n\n        const go = e => {\n            setActivePanel(e.currentTarget.dataset.to);\n        };\n\n\n        return (\n\n            <View activePanel={activePanel}\n                  popout={popout}>\n                <Main id='main'\n                      fetchedUser={fetchedUser}\n                      dataStorage={dataStorage}\n                      activeTab={activeTab}\n                      tabHome={tabHome}\n                      tabFavorites={tabFavorites}\n                      targetList1={targetList1}\n                      count={count}\n                      maxDataLength={maxDataLength}\n                      lastItem={lastItem}\n                      pay={pay}\n                      getPlatform={getPlatform}\n                />\n                <Home id='home'\n                      fetchedUser={fetchedUser}\n                      go={go}/>\n                <Favorites id='favorites'\n                           go={go}/>\n            </View>\n        );\n    }\n;\n\nexport default App;\n\n// {\n//     id: 5,\n//     photo: \"https://st.kp.yandex.net/images/film_big/1174226.jpg\",\n//     name: \"21 мост\",\n//     year: \"2019\"\n// },\n// {\n//     id: 6,\n//     photo: \"https://st.kp.yandex.net/images/film_big/1280515.jpg\",\n//     name: \"Решала. Нулевые\",\n//     year: \"2019\"\n// },\n// {\n//     id: 7,\n//     photo: \"https://st.kp.yandex.net/images/film_big/680851.jpg\",\n//     name: \"Война токов\",\n//     year: \"2019\"\n// },\n// {\n//     id: 8,\n//     photo: \"https://st.kp.yandex.net/images/film_big/718222.jpg\",\n//     name: \"Звёздные войны: Скайуокер. Восход\",\n//     year: \"2019\"\n// }","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}