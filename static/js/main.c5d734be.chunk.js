(this.webpackJsonprandomCinema=this.webpackJsonprandomCinema||[]).push([[0],{103:function(e,t,a){},213:function(e,t,a){e.exports=a(485)},485:function(e,t,a){"use strict";a.r(t);a(214),a(240),a(242),a(243),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282);var n=a(0),c=a.n(n),o=a(122),r=a.n(o),l=a(22),s=a.n(l),i=a(125),u=a(39),m=a.n(u),d=a(12),p=a(124),g=a.n(p),b=(a(291),a(87)),f=a.n(b),h=a(69),E=a.n(h),v=a(71),y=a.n(v),O=a(127),S=a.n(O),j=a(15),k=a.n(j),C=a(205),w=a.n(C),N=a(206),F=a.n(N),x=a(89),I=a.n(x),P=a(126),A=a.n(P),V=a(209),Y=a.n(V),B=a(67),T=a.n(B),W=a(68),K=a.n(W),U=a(123),G=a.n(U),_=(a(103),a(86)),R=a.n(_),D=function(e){var t=e.name,a=e.photo,n=e.year,o=e.idItem;return c.a.createElement(R.a,{top:!0},c.a.createElement(k.a,{className:"cardHome bg-color"},c.a.createElement(T.a,{className:"myItem",id:o,description:n,before:c.a.createElement(K.a,{type:"image",src:a,size:100})},t)))},J=(a(312),function(e){var t=e.name,a=e.photo,n=e.year,o=e.idItem,r=e.storyFavorites,l=(e.share,c.a.createElement(k.a,{id:o,onClick:r},c.a.createElement(G.a,{fill:"var(--accent)"})));return c.a.createElement(R.a,{top:!0},c.a.createElement(k.a,{className:"card bg-color"},c.a.createElement(T.a,{className:"myItem",id:o,description:n,before:c.a.createElement(K.a,{type:"image",src:a,size:100}),asideContent:l},t)))}),L=(a(313),a(88)),Q=a.n(L),z=a(207),q=a.n(z),H=a(208),M=a.n(H),X=a(70),Z=a.n(X),$=function(e){var t=e.id,a=e.dataStorage,n=(e.go,e.activeTab),o=e.tabHome,r=e.tabFavorites,l=(e.count,e.maxDataLength),s=e.lastItem,i=(e.pay,e.getPlatform),u=e.story,m=e.addGroup,d=(e.targetList1,e.storyFavorites),p=e.onChangeSlider,g=e.startYear,b=e.endYear,h=e.checkBoxOnClick,v=e.isAnyYear,O=e.genre,j=e.handleChange,C=e.searchError,N=e.tabAddFilms,x=(e.ref_sourceName,e.refName,e.updateTheme,e.share,e.networkStatus),P=e.updateConnection,V=e.fetchedUser,B=e.openBase,T=(a=a.filter(Boolean)).map((function(e){var t="".concat(e.year,", IMDb ").concat(e.rating);return c.a.createElement(J,{key:"itemFavorites"+e.id,idItem:e.id,photo:e.photo,name:e.name,year:t,storyFavorites:d})}));return c.a.createElement(f.a,{id:t},c.a.createElement(E.a,{noShadow:!0},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0435 \u043a\u0438\u043d\u043e"),"ios"===i?c.a.createElement(k.a,{className:"GroupIos"},"\u0414\u0430\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"):c.a.createElement(c.a.Fragment,null,c.a.createElement(w.a,{vertical:"top"},c.a.createElement(F.a,{className:"TabsDefaultUser"},c.a.createElement(I.a,{onClick:o,selected:"home"===n,className:"tabUser"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),c.a.createElement(I.a,{onClick:r,selected:"favorites"===n,className:"tabUser"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),c.a.createElement(I.a,{onClick:N,selected:"addFilms"===n,className:"tabUser"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),x?c.a.createElement(k.a,{className:"divSpinner"},c.a.createElement(k.a,{className:"navigatorDiv"},"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 - \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435!"),c.a.createElement(Z.a,{className:"navigator",onClick:P,align:"center"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c")):c.a.createElement(c.a.Fragment,null,"home"===n&&!1===l?c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,null,""!==s.length?c.a.createElement(D,{key:"itemHome"+s.id,idItem:s.id,photo:s.photo,name:s.name,year:s.year}):"",c.a.createElement(k.a,{className:"SliderDiv"},c.a.createElement(Q.a,null,v?c.a.createElement(A.a,{step:1,min:2e3,max:2019,value:[g,b],onChange:p,top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434",bottom:"".concat(g," - ").concat(b)}):c.a.createElement(A.a,{className:"SliderDefault",step:1,min:2e3,max:2019,value:[2e3,2019],top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434",bottom:"".concat(2e3," - ",2019)})),c.a.createElement(q.a,{onClick:h},"\u041b\u044e\u0431\u043e\u0439")),""===O?c.a.createElement(Z.a,{level:"danger"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440 \u0444\u0438\u043b\u044c\u043c\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"):"",c.a.createElement(M.a,{onChange:j,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440"},c.a.createElement("option",{value:"\u041b\u044e\u0431\u043e\u0439"},"\u041b\u044e\u0431\u043e\u0439"),c.a.createElement("option",{value:"\u0431\u043e\u0435\u0432\u0438\u043a"},"\u0431\u043e\u0435\u0432\u0438\u043a"),c.a.createElement("option",{value:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"},"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"),c.a.createElement("option",{value:"\u0434\u0440\u0430\u043c\u0430"},"\u0434\u0440\u0430\u043c\u0430"),c.a.createElement("option",{value:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"},"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"),c.a.createElement("option",{value:"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"},"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"),c.a.createElement("option",{value:"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430"},"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430")),C?c.a.createElement(Z.a,{level:"danger"},"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b \u0441 \u0442\u0435\u043a\u0443\u0449\u0438\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430"):"",c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{level:"commerce",onClick:B,size:"xl",stretched:!0},"\u041d\u0430\u0439\u0442\u0438"),c.a.createElement(y.a,{className:"buttonAddGroup",level:"secondary",onClick:m,size:"xl",stretched:!0},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0430\u0448\u0443 \u0433\u0440\u0443\u043f\u043f\u0443"),c.a.createElement(y.a,{className:"buttonStory",level:"primary",onClick:u,size:"xl",stretched:!0},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438")))):c.a.createElement(k.a,null,"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b !"),"home"===n&&!0===l?c.a.createElement(k.a,null,"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b !"):"","favorites"===n?c.a.createElement(c.a.Fragment,null,a.length>0?c.a.createElement(k.a,null,T):c.a.createElement(k.a,null,c.a.createElement(S.a,null,c.a.createElement(k.a,null,"\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430.")))):"",c.a.createElement(c.a.Fragment,null,"addFilms"===n?c.a.createElement(k.a,null,c.a.createElement(S.a,null,c.a.createElement(k.a,null,'\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043b\u044e\u0431\u0438\u043c\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u0432 \u043d\u0430\u0448\u0443 \u0431\u0430\u0437\u0443. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c" \u0438 \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430 \u0438 \u0435\u0433\u043e \u0433\u043e\u0434.')),c.a.createElement(k.a,null,c.a.createElement(Y.a,{href:"https://vk.me/public190534237?ref=".concat(V.id,"&ref_source=").concat(V.id),target:"_blank"},c.a.createElement(y.a,{level:"commerce",size:"xl",stretched:!0},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))):""))))},ee=(a(211),a(210),a(212)),te=a.n(ee),ae=a(90),ne=a.n(ae),ce=(a(327),a(331),{debug:!1});var oe=function(e){return(ce.debug?"http://localhost:8181/":"https://random-cinema.tk/api/")+e},re=a(128),le=a.n(re),se=function(){var e,t=Object(n.useState)("main"),a=Object(d.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(null),u=Object(d.a)(l,2),p=u[0],b=u[1],f=Object(n.useState)("home"),h=Object(d.a)(f,2),E=h[0],v=h[1],y=Object(n.useState)(0),O=Object(d.a)(y,2),S=O[0],j=(O[1],Object(n.useState)([])),k=Object(d.a)(j,2),C=k[0],w=k[1],N=Object(n.useState)(!1),F=Object(d.a)(N,2),x=F[0],I=(F[1],Object(n.useState)([])),P=Object(d.a)(I,2),A=(P[0],P[1],Object(n.useState)("")),V=Object(d.a)(A,2),Y=V[0],B=V[1],T=Object(n.useState)(),W=Object(d.a)(T,2),K=W[0],U=W[1],G=Object(n.useState)("online"),_=Object(d.a)(G,2),R=(_[0],_[1],Object(n.useState)(!1)),L=Object(d.a)(R,2),Q=(L[0],L[1]),z=Object(n.useState)(2006),q=Object(d.a)(z,2),H=q[0],M=q[1],X=Object(n.useState)(2014),Z=Object(d.a)(X,2),ee=Z[0],ae=Z[1],re=Object(n.useState)(!0),se=Object(d.a)(re,2),ie=se[0],ue=se[1],me=Object(n.useState)(!1),de=Object(d.a)(me,2),pe=(de[0],de[1],Object(n.useState)("\u041b\u044e\u0431\u043e\u0439")),ge=Object(d.a)(pe,2),be=ge[0],fe=ge[1],he=Object(n.useState)(!1),Ee=Object(d.a)(he,2),ve=Ee[0],ye=Ee[1],Oe=Object(n.useState)(),Se=Object(d.a)(Oe,2),je=Se[0],ke=(Se[1],Object(n.useState)("\u0416\u0430\u043d\u0440")),Ce=Object(d.a)(ke,2),we=Ce[0],Ne=(Ce[1],Object(n.useState)([])),Fe=Object(d.a)(Ne,2),xe=(Fe[0],Fe[1],Object(n.useState)(!1)),Ie=Object(d.a)(xe,2),Pe=Ie[0],Ae=Ie[1],Ve=Object(n.useState)({id:0,photo:"https://sun9-60.userapi.com/c855424/v855424816/1b98c7/NOZvWdKJbOY.jpg",name:"\u041d\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u0434\u0431\u0435\u0440\u0435\u0442 \u0434\u043b\u044f \u0412\u0430\u0441 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u0441 \u0432\u044b\u0441\u043e\u043a\u0438\u043c \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u043e\u043c \u0432\u0441\u0435\u0433\u043e \u0437\u0430 1 \u0440\u0443\u0431, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 '\u041d\u0430\u0439\u0442\u0438', \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c. "}),Ye=Object(d.a)(Ve,2),Be=Ye[0],Te=Ye[1],We=window.navigator.onLine;function Ke(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=JSON.stringify(C.filter(Boolean).map((function(e){return e.id}))),a.next=3,m.a.awrap(le.a.get(oe("getFilmByFilters?genre=".concat(be,"&years[startYear]=").concat(H,"&years[endYear]=").concat(ee,"&isAnyYear=").concat(!ie,"&currentFilmsIDs=").concat(e))));case 3:"success"!==(t=a.sent.data).status?ye(!0):(Ge(t.message),ye(!1));case 5:case"end":return a.stop()}}))}function Ue(){console.log("\u0412\u044b\u0437\u0432\u0430\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f pay"),s.a.sendPromise("VKWebAppOpenPayForm",{app_id:7254171,action:"pay-to-group",params:{amount:1,group_id:190534237}}).then((function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.status&&!e.result.status){t.next=10;break}return t.prev=1,t.next=4,m.a.awrap(le.a.get(oe("checkTransaction?userId=".concat(p.id))));case 4:"success"===t.sent.data.status&&(Q(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),Ke()),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),null,null,[[1,8]])})).catch((function(e){console.log(e)}))}function Ge(e){C.push(e),w(C);var t=C[C.length-1];Te(t);var a=JSON.stringify(C);s.a.sendPromise("VKWebAppStorageSet",{key:"dataStorage",value:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}Object(n.useEffect)((function(){We?(Ae(!1),console.log("checkNetworkStatus",We)):(Ae(!0),console.log("checkNetworkStatus",We))})),Object(n.useEffect)((function(){s.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}})),function(){var e;m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(s.a.sendPromise("VKWebAppGetUserInfo"));case 2:e=t.sent,b(e);case 4:case"end":return t.stop()}}))}()}),[]),Object(n.useEffect)((function(){s.a.sendPromise("VKWebAppGetClientVersion").then((function(e){console.log("\u0412\u0415\u0420\u0421\u0418\u042f \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u0418\u042f:",e),"ios"===e.platform&&B("ios")})).catch((function(e){console.log(e)})),s.a.sendPromise("VKWebAppStorageGet",{keys:["dataStorage"]}).then((function(e){var t=e.keys[0].value.replace(/&quot;/gi,'"'),a=JSON.parse(t);w(a),console.log("dataStorage",a)})).catch((function(e){console.log(e)}))}),[]);var _e=function(e){r(e.currentTarget.dataset.to)};return document.qiwiPay=function(){console.log("\u0412\u044b\u0437\u0432\u0430\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f qiwiPay"),window.QiwiCheckout.createInvoice({publicKey:"48e7qUxn9T7RyYE1MVZswX1FRSbE6iyCj2gCRwwF3Dnh5XrasNTx3BGPiMsyXQFNKQhvukniQG8RTVhYm3iPuaYVi5RBePrfT1bReScJaiVSaSRm3C2n7ojMWhn6FwadkMSHfVa9GEQaH6vxb8khX6TUwvZUBhqfgBNSx5zTnEf5LxBvmue1CEXUZkF1Z",amount:1,phone:"79625494201"}).then((function(e){alert(e),console.log("QIWI RESOLVE",e)})).catch((function(e){console.log("QIWI ERROR:",e)}))},c.a.createElement(g.a,{activePanel:o,popout:K},c.a.createElement($,(e={id:"main",dataStorage:C,activeTab:E,tabHome:function(){v("home")},tabFavorites:function(){v("favorites")},targetList1:Ke,count:S,maxDataLength:x,lastItem:Be,fetchedUser:p,refName:je,ref_sourceName:we,tabAddFilms:function(){v("addFilms")},searchError:ve,handleChange:function(e){fe(e.target.value),console.log("setGenre :",be)},genre:be,startYear:H,endYear:ee,onChangeSlider:function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];M(a),ae(n),console.log("startYear :",a,"endYear :",n)},storyFavorites:function(e){console.log("storyFavorites:"),e.preventDefault();var t=+e.currentTarget.id,a=C.find((function(e){return e.id===t})),n=a.photo;console.log("targetId:",t),console.log("findTargetId:",a),console.log("findTargetIdPhoto:",n),s.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:n,attachment:{text:"go_to",type:"url",url:"https://vk.com/app7254171"}}).then((function(e){console.log("story res:",e)})).catch((function(e){console.log("story error:",e)}))},addGroup:function(){s.a.send("VKWebAppJoinGroup",{group_id:190534237})},isAnyYear:ie,checkBoxOnClick:function(){ue(!ie),console.log("isAnyYear:",ie)},story:function(){s.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:Be.photo,attachment:{text:"go_to",type:"url",url:"https://vk.com/app7254171"}}).then((function(e){console.log("story res:",e)})).catch((function(e){console.log("story error:",e)}))},getPlatform:Y,pay:Ue,networkStatus:Pe,updateConnection:function(){var e=window.navigator.onLine;Ae(!e)}},Object(i.a)(e,"fetchedUser",p),Object(i.a)(e,"openBase",(function(){ce.debug?Ke():U(c.a.createElement(c.a.Fragment,null,c.a.createElement(te.a,{onClose:function(){return U(null)}},c.a.createElement(ne.a,{autoclose:!0,onClick:document.qiwiPay},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 QIWI"),c.a.createElement(ne.a,{autoclose:!0,onClick:Ue},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 VK Pay"),c.a.createElement(ne.a,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))))})),e)),c.a.createElement(D,{id:"home",go:_e}),c.a.createElement(J,{id:"favorites",go:_e}))};s.a.send("VKWebAppInit"),r.a.render(c.a.createElement(se,null),document.getElementById("root"))}},[[213,1,2]]]);
//# sourceMappingURL=main.c5d734be.chunk.js.map