(this.webpackJsonprandomCinema=this.webpackJsonprandomCinema||[]).push([[0],{100:function(e,t,a){},204:function(e,t,a){e.exports=a(473)},473:function(e,t,a){"use strict";a.r(t);a(205),a(231),a(233),a(234),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273);var n=a(0),c=a.n(n),o=a(116),r=a.n(o),s=a(17),l=a.n(s),i=a(33),m=a.n(i),u=a(9),d=a(119),p=a.n(d),g=(a(282),a(196)),b=a.n(g),f=a(118),h=a.n(f),v=a(68),E=a.n(v),y=a(87),O=a.n(y),S=a(15),j=a.n(S),k=a(197),N=a.n(k),C=a(198),F=a.n(C),x=a(86),w=a.n(x),I=a(200),A=a.n(I),P=a(203),_=a.n(P),K=a(66),V=a.n(K),W=a(67),G=a.n(W),T=a(117),B=a.n(T),D=(a(100),a(84)),U=a.n(D),J=function(e){var t=e.name,a=e.photo,n=e.year,o=e.idItem;return c.a.createElement(U.a,{top:!0},c.a.createElement(j.a,{className:"cardHome bg-color"},c.a.createElement(V.a,{className:"myItem",id:o,description:n,before:c.a.createElement(G.a,{type:"image",src:a,size:100})},t)))},z=(a(303),function(e){var t=e.name,a=e.photo,n=e.year,o=e.idItem,r=e.storyFavorites,s=(e.share,c.a.createElement(j.a,{id:o,onClick:r},c.a.createElement(B.a,{fill:"var(--accent)"})));return c.a.createElement(U.a,{top:!0},c.a.createElement(j.a,{className:"card bg-color"},c.a.createElement(V.a,{className:"myItem",id:o,description:n,before:c.a.createElement(G.a,{type:"image",src:a,size:100}),asideContent:s},t)))}),L=(a(304),a(199)),Y=a.n(L),H=a(201),q=a.n(H),M=a(202),Z=a.n(M),Q=a(85),R=a.n(Q),X=function(e){var t=e.id,a=e.dataStorage,n=(e.go,e.activeTab),o=e.tabHome,r=e.tabFavorites,s=(e.count,e.maxDataLength),l=e.lastItem,i=(e.pay,e.getPlatform),m=e.story,u=e.addGroup,d=e.targetList1,p=e.storyFavorites,g=e.onChangeSlider,f=e.year,v=e.checkBoxOnClick,y=(e.isAnyYear,e.genre,e.handleChange),S=e.searchError,k=e.tabAddFilms,C=e.ref_sourceName,x=e.refName,I=(e.updateTheme,e.fetchedUser,e.share,e.networkStatus),P=e.updateConnection,K=(a=a.filter(Boolean)).map((function(e){var t="".concat(e.year,", IMDb ").concat(e.rating);return c.a.createElement(z,{key:"itemFavorites"+e.id,idItem:e.id,photo:e.photo,name:e.name,year:t,storyFavorites:p})}));return c.a.createElement(b.a,{id:t},c.a.createElement(h.a,{noShadow:!0},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0435 \u043a\u0438\u043d\u043e"),c.a.createElement(N.a,{vertical:"top"},c.a.createElement(F.a,{className:"TabsDefaultUser"},c.a.createElement(w.a,{onClick:o,selected:"home"===n,className:"tabUser"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),c.a.createElement(w.a,{onClick:r,selected:"favorites"===n,className:"tabUser"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),c.a.createElement(w.a,{onClick:k,selected:"addFilms"===n,className:"tabUser"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),I?c.a.createElement(j.a,{className:"divSpinner"},c.a.createElement(j.a,{className:"navigatorDiv"},"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 - \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435!"),c.a.createElement(R.a,{className:"navigator",onClick:P,align:"center"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c")):c.a.createElement(c.a.Fragment,null,"home"===n&&!1===s?c.a.createElement(c.a.Fragment,null,"ios"===i?c.a.createElement(j.a,{className:"GroupIos"},"\u0414\u0430\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"):c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,null,""!==l.length?c.a.createElement(J,{key:"itemHome"+l.id,idItem:l.id,photo:l.photo,name:l.name,year:l.year}):"",c.a.createElement(j.a,{className:"SliderDiv"},c.a.createElement(Y.a,null,c.a.createElement(A.a,{step:1,min:2e3,max:2019,value:Number(f),onChange:g,top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434",bottom:"".concat(f)})),c.a.createElement(q.a,{onClick:v},"\u041b\u044e\u0431\u043e\u0439")),c.a.createElement(O.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440"}),c.a.createElement(Z.a,{onChange:y},c.a.createElement("option",{value:"\u041b\u044e\u0431\u043e\u0439"},"\u041b\u044e\u0431\u043e\u0439"),c.a.createElement("option",{value:"\u0431\u043e\u0435\u0432\u0438\u043a"},"\u0431\u043e\u0435\u0432\u0438\u043a"),c.a.createElement("option",{value:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"},"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"),c.a.createElement("option",{value:"\u0434\u0440\u0430\u043c\u0430"},"\u0434\u0440\u0430\u043c\u0430"),c.a.createElement("option",{value:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"},"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"),c.a.createElement("option",{value:"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"},"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"),c.a.createElement("option",{value:"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430"},"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430")),S?c.a.createElement(O.a,null,c.a.createElement(R.a,{level:"danger"},"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b \u0441 \u0442\u0435\u043a\u0443\u0449\u0438\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430")):"",c.a.createElement(O.a,{title:"\u041d\u0430\u0439\u0442\u0438 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u0437\u0430 1 \u0440\u0443\u0431"}),c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{level:"commerce",onClick:d,size:"xl",stretched:!0},"\u041d\u0430\u0439\u0442\u0438"),c.a.createElement(E.a,{className:"buttonAddGroup",level:"secondary",onClick:u,size:"xl",stretched:!0},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0430\u0448\u0443 \u0433\u0440\u0443\u043f\u043f\u0443"),c.a.createElement(E.a,{className:"buttonStory",level:"primary",onClick:m,size:"xl",stretched:!0},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"))))):c.a.createElement(j.a,null,"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b !"),"home"===n&&!0===s?c.a.createElement(j.a,null,"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u043c\u044b !"):"","favorites"===n?c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,null,K)):"",c.a.createElement(c.a.Fragment,null,"addFilms"===n?c.a.createElement(j.a,null,c.a.createElement(j.a,null,c.a.createElement(_.a,{href:"https://vk.me/public190534237?ref=".concat(x,"&ref_source=").concat(C),target:"_blank"},c.a.createElement(E.a,{level:"commerce",size:"xl",stretched:!0},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))):"")))},$=(a(316),a(320),!1);var ee=function(e){return($?"http://localhost:8181/":"https://random-cinema.tk/api/")+e},te=a(120),ae=a.n(te),ne=function(){var e=Object(n.useState)("main"),t=Object(u.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(null),s=Object(u.a)(r,2),i=s[0],d=s[1],g=Object(n.useState)("home"),b=Object(u.a)(g,2),f=b[0],h=b[1],v=Object(n.useState)(0),E=Object(u.a)(v,2),y=E[0],O=(E[1],Object(n.useState)([])),S=Object(u.a)(O,2),j=S[0],k=S[1],N=Object(n.useState)(!1),C=Object(u.a)(N,2),F=C[0],x=(C[1],Object(n.useState)([])),w=Object(u.a)(x,2),I=(w[0],w[1],Object(n.useState)("")),A=Object(u.a)(I,2),P=A[0],_=A[1],K=Object(n.useState)(),V=Object(u.a)(K,2),W=V[0],G=(V[1],Object(n.useState)("online")),T=Object(u.a)(G,2),B=(T[0],T[1],Object(n.useState)(!1)),D=Object(u.a)(B,2),U=(D[0],D[1]),L=Object(n.useState)(2e3),Y=Object(u.a)(L,2),H=Y[0],q=Y[1],M=Object(n.useState)(!0),Z=Object(u.a)(M,2),Q=Z[0],R=Z[1],$=Object(n.useState)(!1),te=Object(u.a)($,2),ne=(te[0],te[1],Object(n.useState)("\u041b\u044e\u0431\u043e\u0439")),ce=Object(u.a)(ne,2),oe=ce[0],re=ce[1],se=Object(n.useState)(!1),le=Object(u.a)(se,2),ie=le[0],me=le[1],ue=Object(n.useState)("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),de=Object(u.a)(ue,2),pe=de[0],ge=(de[1],Object(n.useState)("\u0416\u0430\u043d\u0440")),be=Object(u.a)(ge,2),fe=be[0],he=(be[1],Object(n.useState)([])),ve=Object(u.a)(he,2),Ee=(ve[0],ve[1],Object(n.useState)(!1)),ye=Object(u.a)(Ee,2),Oe=ye[0],Se=ye[1],je=Object(n.useState)({id:0,photo:"https://sun9-60.userapi.com/c855424/v855424816/1b98c7/NOZvWdKJbOY.jpg",name:"\u0416\u043c\u0438  - \u043d\u0430\u0439\u0442\u0438!"}),ke=Object(u.a)(je,2),Ne=ke[0],Ce=ke[1],Fe=window.navigator.onLine;function xe(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=JSON.stringify(j.filter(Boolean).map((function(e){return e.id}))),a.next=3,m.a.awrap(ae.a.get(ee("getFilmByFilters?genre=".concat(oe,"&year=").concat(H,"&isAnyYear=").concat(!Q,"&currentFilmsIDs=").concat(e))));case 3:"success"!==(t=a.sent.data).status?me(!0):(we(t.message),me(!1));case 5:case"end":return a.stop()}}))}function we(e){j.push(e),k(j);var t=j[j.length-1];Ce(t);var a=JSON.stringify(j);l.a.sendPromise("VKWebAppStorageSet",{key:"dataStorage",value:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}Object(n.useEffect)((function(){Fe?(Se(!1),console.log("checkNetworkStatus",Fe)):(Se(!0),console.log("checkNetworkStatus",Fe))})),Object(n.useEffect)((function(){l.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}})),function(){var e;m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(l.a.sendPromise("VKWebAppGetUserInfo"));case 2:e=t.sent,d(e);case 4:case"end":return t.stop()}}))}()}),[]),Object(n.useEffect)((function(){l.a.sendPromise("VKWebAppGetClientVersion").then((function(e){console.log("\u0412\u0415\u0420\u0421\u0418\u042f \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u0418\u042f:",e),"ios"===e.platform&&_("ios")})).catch((function(e){console.log(e)})),l.a.sendPromise("VKWebAppStorageGet",{keys:["dataStorage"]}).then((function(e){var t=e.keys[0].value.replace(/&quot;/gi,'"'),a=JSON.parse(t);k(a),console.log("dataStorage",a)})).catch((function(e){console.log(e)}))}),[]);var Ie=function(e){o(e.currentTarget.dataset.to)};return c.a.createElement(p.a,{activePanel:a,popout:W},c.a.createElement(X,{id:"main",dataStorage:j,activeTab:f,tabHome:function(){h("home")},tabFavorites:function(){h("favorites")},targetList1:xe,count:y,maxDataLength:F,lastItem:Ne,fetchedUser:i,refName:pe,ref_sourceName:fe,tabAddFilms:function(){h("addFilms")},searchError:ie,handleChange:function(e){re(e.target.value),console.log("setGenre :",oe)},genre:oe,year:H,onChangeSlider:function(e){q(e),console.log("setYear :",e)},storyFavorites:function(e){console.log("storyFavorites:"),e.preventDefault();var t=+e.currentTarget.id,a=j.find((function(e){return e.id===t})),n=a.photo;console.log("targetId:",t),console.log("findTargetId:",a),console.log("findTargetIdPhoto:",n),l.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:n,attachment:{text:"go_to",type:"url",url:"https://vk.com/app7254171"}}).then((function(e){console.log("story res:",e)})).catch((function(e){console.log("story error:",e)}))},addGroup:function(){l.a.send("VKWebAppJoinGroup",{group_id:190534237})},isAnyYear:Q,checkBoxOnClick:function(){R(!Q),console.log("isAnyYear:",Q)},story:function(){l.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:Ne.photo,attachment:{text:"go_to",type:"url",url:"https://vk.com/app7254171"}}).then((function(e){console.log("story res:",e)})).catch((function(e){console.log("story error:",e)}))},getPlatform:P,pay:function(){l.a.sendPromise("VKWebAppOpenPayForm",{app_id:7254171,action:"pay-to-group",params:{amount:1,group_id:190534237}}).then((function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.status&&!e.result.status){t.next=10;break}return t.prev=1,t.next=4,m.a.awrap(ae.a.get(ee("checkTransaction?userId=".concat(i.id))));case 4:"success"===t.sent.data.status&&(U(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),xe()),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),null,null,[[1,8]])})).catch((function(e){console.log(e)}))},networkStatus:Oe,updateConnection:function(){var e=window.navigator.onLine;Se(!e)}}),c.a.createElement(J,{id:"home",go:Ie}),c.a.createElement(z,{id:"favorites",go:Ie}))};l.a.send("VKWebAppInit"),r.a.render(c.a.createElement(ne,null),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.d4d9cddd.chunk.js.map